# PicklePlay RBAC - System Flowcharts & Diagrams

## ğŸ“Š User Registration Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER REGISTRATION                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚  User Registers â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                 â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Social Sign-up â”‚            â”‚ Email Registration  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                                 â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚  Verify Email   â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                 â”‚
              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Account Active â”‚         â”‚ Email Verified      â”‚
              â”‚ Role = CUSTOMERâ”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚ (Base Role)    â”‚                      â”‚
              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
                    â”‚                                 â”‚
                    â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                         â”‚ Role = CUSTOMERâ”‚
                    â”‚                         â”‚ (Base Role)    â”‚
                    â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                                 â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Account Ready              â”‚
                        â”‚ User can Log In            â”‚
                        â”‚ Can Apply for Other Roles â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Post-Login Role Application Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ROLE APPLICATION & APPROVAL WORKFLOW                       â”‚
â”‚               (After User Logs In with CUSTOMER Role)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USER                          SYSTEM                          ADMIN
  â”‚                             â”‚                              â”‚
  â”œâ”€ Logs In â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚                             â”‚
  â”‚                              â”‚                             â”‚
  â”œâ”€ Role: CUSTOMER              â”‚                             â”‚
  â”‚                              â”‚                             â”‚
  â”œâ”€ Views Dashboard â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚                          â”‚
  â”‚  [Apply for Role]              â”‚                          â”‚
  â”‚                              â”‚                             â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                             â”‚
  â”‚  â”‚ Available Roles:    â”‚     â”‚                             â”‚
  â”‚  â”‚ â€¢ PLAYER            â”‚     â”‚                             â”‚
  â”‚  â”‚ â€¢ COACH             â”‚     â”‚                             â”‚
  â”‚  â”‚ â€¢ COURT_OWNER       â”‚     â”‚                             â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                             â”‚
  â”‚                              â”‚                             â”‚
  â”œâ”€ Selects: COACH Role â”€â”€â”€â”€â”€â”€â”€â–º  â”‚                           â”‚
  â”‚ & Submits Application         â”‚                           â”‚
  â”‚                              â”‚                           â”‚
  â”‚  Application Form:           â”‚                           â”‚
  â”‚  â€¢ Certifications            â”‚                           â”‚
  â”‚  â€¢ Experience Level          â”‚                           â”‚
  â”‚  â€¢ Rates/Pricing             â”‚                           â”‚
  â”‚  â€¢ Bio & Photo               â”‚                           â”‚
  â”‚  â€¢ Documents                 â”‚                           â”‚
  â”‚                              â”‚                           â”‚
  â”‚                              â”œâ”€â”€â–º [PENDING REVIEW] â”€â”€â”€â”  â”‚
  â”‚                              â”‚    â€¢ Queued for Review  â”‚  â”‚
  â”‚                              â”‚    â€¢ Notification Sent  â”‚  â”‚
  â”‚                              â”‚                        â”‚  â”‚
  â”‚                              â”‚                        â—„â”€â”€â”¤
  â”‚                              â”‚    Admin Reviews       â”‚  â”‚
  â”‚                              â”‚    Application         â”‚  â”‚
  â”‚                              â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
  â”‚                              â”‚    â”‚ â€¢ Check Docs â”‚   â”‚  â”‚
  â”‚                              â”‚    â”‚ â€¢ Validate   â”‚   â”‚  â”‚
  â”‚                              â”‚    â”‚ â€¢ Background â”‚   â”‚  â”‚
  â”‚                              â”‚    â”‚ â€¢ Decision   â”‚   â”‚  â”‚
  â”‚                              â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
  â”‚                              â”‚           â”‚           â”‚  â”‚
  â”‚                              â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
  â”‚                              â”‚    â”‚ Approve Or  â”‚    â”‚  â”‚
  â”‚                              â”‚    â”‚ Reject?     â”‚    â”‚  â”‚
  â”‚                              â”‚    â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜    â”‚  â”‚
  â”‚                              â”‚       â”‚      â”‚        â”‚  â”‚
  â”‚                         â”Œâ”€â”€â”€â”€â–¼â”€â”€â”   â”‚   â”Œâ”€â”€â–¼â”€â”€â”€â”€â”   â”‚  â”‚
  â”‚                         â”‚Approveâ”‚   â”‚   â”‚Reject â”‚   â”‚  â”‚
  â”‚                         â””â”€â”€â”€â”€â”¬â”€â”€â”˜   â”‚   â””â”€â”€â”¬â”€â”€â”€â”€â”˜   â”‚  â”‚
  â”‚                              â”‚      â”‚      â”‚        â”‚  â”‚
  â”‚                              â”‚      â”‚  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                              â”‚      â”‚  â”‚              â”‚
  â”‚ â—„â”€â”€Notificationâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  Feedback sent â”‚
  â”‚   Role Granted: COACH          â”‚  â”‚              â”‚
  â”‚                              â”‚  â”‚              â”‚
  â”‚ â—„â”€â”€Notificationâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ Can Reapply â”‚
  â”‚   Application Rejected                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚   Reason: [provided]
  â”‚   Can Reapply: [Yes/No/Date]
  â”‚
  â”œâ”€ Now Has Multiple Roles â”€â”€â”€â”€â”€â–º  â”‚
  â”‚  â€¢ CUSTOMER                      â”‚
  â”‚  â€¢ COACH (newly approved)        â”‚
  â”‚
  â”œâ”€ Updated Dashboard â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚
  â”‚  [Role Switcher Available]       â”‚
  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Multiple Role Application Process

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              APPLYING FOR MULTIPLE ROLES - CONCURRENT FLOW                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CURRENT STATUS: CUSTOMER

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ User Dashboard   â”‚
                    â”‚ Role Management  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                â”‚                  â”‚                  â”‚
      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Apply for    â”‚  â”‚ Apply forâ”‚  â”‚ Apply for        â”‚
      â”‚ PLAYER       â”‚  â”‚COURT     â”‚  â”‚ COACH            â”‚
      â”‚              â”‚  â”‚OWNER     â”‚  â”‚                  â”‚
      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚               â”‚                  â”‚
      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
      â”‚   Fill Application Forms                      â”‚
      â”‚   (Can submit all, some, or one)             â”‚
      â”‚   â€¢ Separate requirements for each           â”‚
      â”‚   â€¢ Tracked independently                    â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ All Applications Sent to    â”‚
      â”‚ Admin Review Queue          â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Admin Reviews Each          â”‚
      â”‚ Application Separately      â”‚
      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚              â”‚         â”‚
      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”€â”€â”
      â”‚PLAYER:â”‚      â”‚COACH: â”‚  â”‚COURT  â”‚
      â”‚App 1  â”‚      â”‚App 2  â”‚  â”‚OWNER  â”‚
      â”‚       â”‚      â”‚       â”‚  â”‚App 3  â”‚
      â””â”€â”€â”€â”€â”¬â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”€â”˜
           â”‚              â”‚        â”‚
      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”  â”Œâ–¼â”€â”€â”€â”€â”€â”€â”
      â”‚Approve â”‚     â”‚Approve â”‚  â”‚Approveâ”‚
      â”‚or      â”‚     â”‚or      â”‚  â”‚or     â”‚
      â”‚Reject  â”‚     â”‚Reject  â”‚  â”‚Reject â”‚
      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚              â”‚       â”‚
      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”¬â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚PLAYER     â”‚COACH      â”‚COURT_OWNER  â”‚
      â”‚GRANTED/   â”‚GRANTED/   â”‚GRANTED/     â”‚
      â”‚REJECT     â”‚REJECT     â”‚REJECT       â”‚
      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚       â”‚
      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ User Notified of        â”‚
      â”‚ All Outcomes            â”‚
      â”‚ (Approved/Rejected)     â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Updated User Profile:    â”‚
      â”‚ â€¢ CUSTOMER (base)        â”‚
      â”‚ â€¢ PLAYER (if approved)   â”‚
      â”‚ â€¢ COACH (if approved)    â”‚
      â”‚ â€¢ COURT_OWNER (if appr.) â”‚
      â”‚ â€¢ Can switch roles when  â”‚
      â”‚   multiple are approved  â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ Available Roles for User Application

Users can apply for **three roles** after registration:

1. **PLAYER** - Join the competitive ranking system and participate in tournaments
2. **COACH** - Become a professional coaching provider
3. **COURT_OWNER** - Manage a pickleball court facility

**ADMIN** and **SUPER_ADMIN** roles are assigned by existing administrators only.

---

## ğŸ“‹ Role Application Form Templates

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                PLAYER ROLE APPLICATION FORM REQUIREMENTS                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

REQUIRED FIELDS:

1. BASIC INFORMATION
   â”œâ”€ Full Name
   â”œâ”€ Date of Birth
   â”œâ”€ Phone Number
   â””â”€ Location/City

2. PLAYING PROFILE
   â”œâ”€ Current Skill Level
   â”‚  (Beginner, Intermediate, Advanced, Professional)
   â”œâ”€ Years Playing Pickleball
   â”œâ”€ Play Frequency
   â”‚  (Casual, Regular 1-2x/week, Frequent 3-4x/week, Competitive)
   â””â”€ Primary Position
      (None/Mix, Dinking/Net, Aggressive/Baseline, Both)

3. EXPERIENCE & ACHIEVEMENTS
   â”œâ”€ Tournament Participation
   â”‚  (Never, Local, Regional, National)
   â”œâ”€ Certifications/Rankings
   â”œâ”€ Previous Tournament Results
   â””â”€ Notable Achievements


4. PREFERRED PLAY STYLE
   â”œâ”€ Preferred Court Type
   â”‚  (Indoor, Outdoor, Either)
   â”œâ”€ Preferred Match Format
   â”‚  (Singles, Doubles, Both)
   â”œâ”€ Availability for Matches
   â”‚  (Weekdays, Weekends, Flexible)
   â””â”€ Preferred Time Slots

5. PROFILE DETAILS
   â”œâ”€ Profile Photo
   â”œâ”€ Bio/About Me
   â”œâ”€ Favorite Courts (Optional)
   â””â”€ Social Links (Optional)

6. AGREEMENT & TERMS
   â”œâ”€ â˜ Agree to Player Code of Conduct
   â”œâ”€ â˜ Accept Community Guidelines
   â”œâ”€ â˜ Acknowledge Ranking System Rules
   â””â”€ â˜ Agree to Fair Play Standards

OPTIONAL FIELDS:
   â”œâ”€ Team/Club Affiliation
   â”œâ”€ Emergency Contact
   â””â”€ Medical Conditions/Limitations


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               COACH ROLE APPLICATION FORM REQUIREMENTS                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

REQUIRED FIELDS:

1. PROFESSIONAL INFO
   â”œâ”€ Full Name
   â”œâ”€ Phone Number
   â”œâ”€ Years of Experience
   â”œâ”€ Current Skill Level
   â”‚  (Beginner, Intermediate, Advanced, Professional)
   â””â”€ Specializations
      (Technique, Strategy, Fitness, Kids, etc.)

2. CREDENTIALS & CERTIFICATIONS
   â”œâ”€ Upload Certificates
   â”‚  â€¢ Coaching Certification
   â”‚  â€¢ Professional License
   â”‚  â€¢ Skills Badge
   â””â”€ Verification Status

3. BACKGROUND
   â”œâ”€ Play History
   â”œâ”€ Tournament Experience
   â”œâ”€ Previous Coaching
   â””â”€ References (Optional)

4. COACHING DETAILS
   â”œâ”€ Availability Schedule
   â”œâ”€ Preferred Court Types
   â”œâ”€ Lesson Duration Options
   â”‚  (30min, 60min, 90min, etc.)
   â””â”€ Group Size Preference
      (Individual, Small Group, Classes)

5. PRICING
   â”œâ”€ Hourly Rate
   â”œâ”€ Package Deals
   â””â”€ Trial Lesson Rate

6. PROFILE
   â”œâ”€ Professional Photo
   â”œâ”€ Bio/Description
   â””â”€ Social Links (Optional)

7. TERMS & CONDITIONS
   â”œâ”€ â˜ Agree to Coach Guidelines
   â”œâ”€ â˜ Accept Community Standards
   â””â”€ â˜ Acknowledge Payment Terms


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           COURT OWNER ROLE APPLICATION FORM REQUIREMENTS                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

REQUIRED FIELDS:

1. BUSINESS INFO
   â”œâ”€ Business Name
   â”œâ”€ Business Type
   â”‚  (Facility Owner, Manager, Operator)
   â”œâ”€ Years in Business
   â””â”€ Business License
      (Upload document)

2. FACILITY DETAILS
   â”œâ”€ Court Name(s)
   â”œâ”€ Number of Courts
   â”œâ”€ Address
   â”œâ”€ GPS Coordinates
   â””â”€ Facility Type
      (Indoor, Outdoor, Hybrid)

3. OPERATING HOURS
   â”œâ”€ Opening Time
   â”œâ”€ Closing Time
   â”œâ”€ Days Open
   â””â”€ Seasonal Variations

4. CONTACT INFO
   â”œâ”€ Phone Number
   â”œâ”€ Email
   â”œâ”€ Website (Optional)
   â””â”€ Social Media (Optional)

5. AMENITIES
   â”œâ”€ â˜ Parking
   â”œâ”€ â˜ AC/Climate Control
   â”œâ”€ â˜ Coaching Available
   â”œâ”€ â˜ Restaurant/Cafe
   â”œâ”€ â˜ Lounge Area
   â”œâ”€ â˜ Equipment Rental
   â””â”€ â˜ Other: _______

6. PRICING INFORMATION
   â”œâ”€ Court Rate per Hour
   â”œâ”€ Peak vs Off-Peak Rates
   â””â”€ Membership Options

7. VERIFICATION DOCUMENTS
   â”œâ”€ Business License
   â”œâ”€ Tax ID
   â”œâ”€ Ownership Proof
   â””â”€ Lease Agreement

8. TERMS & CONDITIONS
   â”œâ”€ â˜ Agree to Court Guidelines
   â”œâ”€ â˜ Accept Community Standards
   â””â”€ â˜ Acknowledge Booking Terms
```

---

## ğŸ” Permission Checking Middleware Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              API REQUEST WITH PERMISSION CHECK                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  API Request     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Verify Auth Tokenâ”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Token Valid?    â”‚
                    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜
                        â”‚          â”‚
                    â”Œâ”€â”€â”€â–¼â”€â”€â”   â”Œâ”€â”€â”€â–¼â”€â”€â”
                    â”‚ Yes  â”‚   â”‚ No   â”‚
                    â””â”€â”€â”€â”¬â”€â”€â”˜   â””â”€â”€â”€â”¬â”€â”€â”˜
                        â”‚         â”‚
                        â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚    â”‚ 401 Forbidden â”‚
                        â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Get User Role    â”‚
                    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚           â”‚           â”‚           â”‚
      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”
      â”‚ SUPER    â”‚ â”‚ADMIN â”‚ â”‚ COACH  â”‚ â”‚CUSTOMERâ”‚
      â”‚ADMIN     â”‚ â”‚      â”‚ â”‚        â”‚ â”‚        â”‚
      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
            â”‚          â”‚       â”‚          â”‚
            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚  â”‚
      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Check Permission for  â”‚
      â”‚ Requested Resource    â”‚
      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚  â”‚
        â”Œâ”€â”€â”€â”€â–¼â” â””â”€â”€â”€â”€â”
        â”‚Allowâ”‚      â”‚Deny
        â””â”€â”€â”€â”€â”¬â”˜      â””â”€â”€â”€â”€â”
             â”‚             â”‚
        â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Execute   â”‚  â”‚ 403 Forbiddenâ”‚
        â”‚ Action    â”‚  â”‚ Log Attempt  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ‘¥ Role Hierarchy & Permission Inheritance

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ROLE HIERARCHY PYRAMID                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ SUPER ADMIN  â”‚
                        â”‚   (Root)     â”‚
                        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚                â”‚
                â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                â”‚  ADMIN  â”‚      â”‚COURT OWNERâ”‚
                â”‚ (Manager)      â”‚(Business) â”‚
                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                     â”‚                â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
            â”‚                 â”‚       â”‚
       â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â–¼â”€â”€â”€â”   â”‚
       â”‚  COACH  â”‚        â”‚ COACH â”‚â—„â”€â”€â”´â”€ (Alternative path)
       â”‚(Provider)         â”‚       â”‚
       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”¬â”€â”€â”€â”˜
            â”‚                â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
              â”‚  CUSTOMER   â”‚
              â”‚ (Base User) â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Legend:
â””â”€â”€â”€â”€â–º User can upgrade/request role
â—„â”€â”€â”€â”€ Can hold multiple roles
```

---

## ğŸ¬ User Dashboard Access Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           DASHBOARD ROUTING BASED ON USER ROLE                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ User Login  â”‚
                        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Fetch User Role â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                    â”‚                    â”‚            â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”     â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
   â”‚SUPER    â”‚         â”‚ ADMIN  â”‚         â”‚ COACH   â”‚     â”‚CUSTOMER â”‚
   â”‚ADMIN    â”‚         â”‚        â”‚         â”‚         â”‚     â”‚          â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                  â”‚                   â”‚             â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
   â”‚ System        â”‚  â”‚ Admin       â”‚  â”‚ Coach     â”‚  â”‚ User      â”‚
   â”‚ Control Panel â”‚  â”‚ Dashboard   â”‚  â”‚ Dashboard â”‚  â”‚ Dashboard â”‚
   â”‚               â”‚  â”‚             â”‚  â”‚           â”‚  â”‚           â”‚
   â”‚ â€¢ User Mgmt   â”‚  â”‚ â€¢ Courts    â”‚  â”‚ â€¢ Profile â”‚  â”‚ â€¢ Profile â”‚
   â”‚ â€¢ All Courts  â”‚  â”‚ â€¢ Moderationâ”‚  â”‚ â€¢ Scheduleâ”‚  â”‚ â€¢ Courts  â”‚
   â”‚ â€¢ All Coaches â”‚  â”‚ â€¢ Reports   â”‚  â”‚ â€¢ Lessons â”‚  â”‚ â€¢ Bookingsâ”‚
   â”‚ â€¢ Analytics   â”‚  â”‚             â”‚  â”‚ â€¢ Earningsâ”‚  â”‚ â€¢ Stats   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                  â”‚                  â”‚             â”‚
        â”‚                  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
        â”‚                  â”‚         â”‚                      â”‚
        â”‚                  â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”              â”‚
        â”‚                  â”‚    â”‚COURT OWNERâ”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                  â”‚    â”‚ Dashboard â”‚
        â”‚                  â”‚    â”‚           â”‚
        â”‚                  â”‚    â”‚ â€¢ My Courtâ”‚
        â”‚                  â”‚    â”‚ â€¢ Scheduleâ”‚
        â”‚                  â”‚    â”‚ â€¢ Reviews â”‚
        â”‚                  â”‚    â”‚ â€¢ Analytics
        â”‚                  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                    â”‚ Render      â”‚
                    â”‚ Appropriate â”‚
                    â”‚ Dashboard   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¢ Court Management Access Control

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          COURT MANAGEMENT - WHO CAN DO WHAT                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Court Action â”‚
                        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚            â”‚           â”‚             â”‚
          â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
          â”‚  Create   â”‚  â”‚Edit â”‚   â”‚ Delete  â”‚   â”‚ Moderator â”‚
          â”‚  Court    â”‚  â”‚     â”‚   â”‚         â”‚   â”‚  Actions  â”‚
          â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                â”‚           â”‚           â”‚            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”        â”‚           â”‚            â”‚
        â”‚           â”‚        â”‚           â”‚            â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”    â”‚           â”‚            â”‚
   â”‚SUPER  â”‚  â”‚COURT  â”‚    â”‚           â”‚            â”‚
   â”‚ADMIN  â”‚  â”‚OWNER  â”‚    â”‚           â”‚            â”‚
   â””â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”˜    â”‚           â”‚            â”‚
      â”‚            â”‚       â”‚           â”‚            â”‚
      â”‚       â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚            â”‚
      â”‚       â”‚                        â”‚            â”‚
      â”‚   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”‚
      â”‚   â”‚ Edit Own      â”‚    â”‚ Edit All    â”‚    â”‚
      â”‚   â”‚ Court Details â”‚    â”‚ Court Info  â”‚    â”‚
      â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â”‚
      â”‚                              â”‚            â”‚
      â”‚                          â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”      â”‚
      â”‚                          â”‚ SUPER   â”‚      â”‚
      â”‚                          â”‚ ADMIN   â”‚      â”‚
      â”‚                          â”‚ + ADMIN â”‚      â”‚
      â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
      â”‚                                           â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚                â”‚
                  â”Œâ”€â”€â”€â–¼â”€â”€â”         â”Œâ”€â”€â”€â–¼â”€â”€â”
                  â”‚Allow â”‚         â”‚Deny  â”‚
                  â”‚      â”‚         â”‚      â”‚
                  â”‚Updateâ”‚         â”‚Error â”‚
                  â”‚Court â”‚         â”‚403   â”‚
                  â””â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“š Coach Management Access Control

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        COACHING FEATURES - ROLE BASED ACCESS                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Coaching Moduleâ”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                â”‚              â”‚              â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â–¼â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚ View Coachâ”‚    â”‚Create â”‚      â”‚Book    â”‚    â”‚ Manage   â”‚
   â”‚ Directory â”‚    â”‚Profileâ”‚      â”‚Lesson  â”‚    â”‚ Schedule â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”¬â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚               â”‚              â”‚              â”‚
        â”‚           â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”      â”‚              â”‚
        â”‚           â”‚           â”‚      â”‚              â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”  â”‚          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚CUSTOMER â”‚  â”‚COACH â”‚  â”‚ADMIN  â”‚  â”‚          â”‚ COACH   â”‚
   â”‚          â”‚  â”‚      â”‚  â”‚       â”‚  â”‚          â”‚ (Self)  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        âœ“          âœ“           âœ“       â”‚              âœ“
                                       â”‚
                                â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”
                                â”‚CUSTOMER â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     âœ“
                          (Can book after selecting)

   Legend:
   âœ“ = Access Allowed
   âœ— = Access Denied
```

---

## ğŸ”’ Admin Moderation Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             CONTENT MODERATION & ENFORCEMENT                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ User Reports Content â”‚
              â”‚ (Review/Comment)     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                    â”‚ Flagged  â”‚
                    â”‚ Review   â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                         â”‚
                    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Alert ADMIN  â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                   â”‚ADMIN      â”‚
                   â”‚Reviews    â”‚
                   â”‚Flag       â”‚
                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                         â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚            â”‚            â”‚
       â”Œâ”€â”€â”€â”€â–¼â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”
       â”‚Approveâ”‚    â”‚Remove â”‚   â”‚Escalateâ”‚
       â”‚Contentâ”‚    â”‚Contentâ”‚   â”‚to      â”‚
       â””â”€â”€â”€â”€â”¬â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”˜   â”‚SUPER   â”‚
            â”‚            â”‚      â”‚ADMIN   â”‚
            â”‚            â”‚      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
       â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”‚
       â”‚Content    â”‚ â”‚Delete    â”‚   â”‚
       â”‚Remains    â”‚ â”‚Post      â”‚   â”‚
       â”‚Published  â”‚ â”‚          â”‚   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                        â”‚            â”‚
                        â”‚       â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                        â”‚       â”‚Review     â”‚
                        â”‚       â”‚Report     â”‚
                        â”‚       â”‚           â”‚
                        â”‚       â”‚Ban User   â”‚
                        â”‚       â”‚Option     â”‚
                        â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Notify Userâ”‚
                    â”‚(if removed)â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’³ Booking & Transaction Flow by Role

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          LESSON BOOKING - MULTI-ROLE INTERACTION                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CUSTOMER:                    COACH:               ADMIN/SUPER:
                                                 (Oversight)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Browse Coachesâ”‚            â”‚ Manage        â”‚
â”‚ & Availability            â”‚ Availability â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                         â”‚
       â”‚                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Select Coach     â”‚        â”‚Check Bookings â”‚
â”‚& Time Slot      â”‚        â”‚& Pricing      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                        â”‚
       â”‚                   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
       â”‚                   â”‚ Rate set? â”‚
       â”‚                   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                        â”‚
       â”‚                   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
       â”‚                   â”‚Calculate  â”‚
       â”‚                   â”‚ Fees      â”‚
       â”‚                   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                        â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚ Request Sent â”‚
            â”‚ to Coach     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚COACH Receives    â”‚
            â”‚Notification      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                    â”‚
       â”Œâ”€â”€â–¼â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â–¼â”€â”€â”
       â”‚Accept â”‚          â”‚Rejectâ”‚
       â””â”€â”€â”¬â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”¬â”€â”€â”˜
          â”‚                   â”‚
    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
    â”‚Send Payment  â”‚     â”‚Notify    â”‚
    â”‚Request to    â”‚     â”‚Customer  â”‚
    â”‚Customer      â”‚     â”‚(Rejected)â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚CUSTOMER      â”‚
    â”‚Completes     â”‚
    â”‚Payment       â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Booking        â”‚
    â”‚ Confirmed      â”‚
    â”‚ â€¢ COACH sees   â”‚
    â”‚   in calendar  â”‚
    â”‚ â€¢ CUSTOMER     â”‚
    â”‚   in history   â”‚
    â”‚ â€¢ ADMIN views  â”‚
    â”‚   in analytics â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Permission Check Implementation Pattern

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           BACKEND PERMISSION CHECKING PATTERN                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CLIENT REQUEST
       â”‚
       â”‚  POST /api/courts
       â”‚  { name: "Court A", ... }
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ API Endpoint Handler       â”‚
â”‚ (routes/api.php)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Middleware: Authenticate   â”‚
â”‚ - Check token validity     â”‚
â”‚ - Extract user & role      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Middleware: Authorize      â”‚
â”‚ - Check role permission    â”‚
â”‚ - Verify resource access   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
        â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
        â”‚           â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”    â”Œâ”€â”€â”€â–¼â”€â”€â”
   â”‚Allow â”‚    â”‚Deny  â”‚
   â””â”€â”€â”€â”€â”¬â”€â”˜    â””â”€â”€â”€â”¬â”€â”€â”˜
        â”‚          â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”‚
   â”‚Controller â”‚  â”‚
   â”‚ Method    â”‚  â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â”‚         â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚Database Query â”‚
   â”‚(Validation)   â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚             â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”
   â”‚Successâ”‚    â”‚Error  â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”˜
        â”‚            â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚Return   â”‚  â”‚Return  â”‚
   â”‚200 OK   â”‚  â”‚400/403 â”‚
   â”‚+ Data   â”‚  â”‚+ Error â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± Frontend Route Protection

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      FRONTEND ROUTE GUARDING & CONDITIONAL RENDERING            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Visits  â”‚
â”‚ /admin/users â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Route Middleware Check â”‚
â”‚ (Next.js middleware)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚User Auth?  â”‚
   â””â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
       â”‚    â”‚
   â”Œâ”€â”€â”€â–¼â”€â”€â”â””â”€â”€â”€â”€â†’ Redirect to /login
   â”‚Yes   â”‚
   â””â”€â”€â”€â”¬â”€â”€â”˜
       â”‚
   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚Get User Role    â”‚
   â”‚(from context)   â”‚
   â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚Role=ADMIN?   â”‚
   â””â”€â”€â”€â”¬â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚  â”‚
   â”Œâ”€â”€â”€â–¼â”â””â”€â”€â”€â”€â†’ Redirect to /dashboard
   â”‚Yes â”‚
   â””â”€â”€â”€â”¬â”˜
       â”‚
   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Render Admin Page      â”‚
   â”‚ with components:       â”‚
   â”‚ - User list            â”‚
   â”‚ - Role management      â”‚
   â”‚ - Delete buttons       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CONDITIONAL RENDERING EXAMPLE:
{user?.role === 'admin' ? (
  <AdminSection />
) : (
  <NoAccessMessage />
)}
```

---

## ğŸ”„ Role Change Request Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        UPGRADING FROM CUSTOMER TO COACH - FULL FLOW             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CUSTOMER                    SYSTEM                    SUPER ADMIN/ADMIN
   â”‚                           â”‚                            â”‚
   â”‚                           â”‚                            â”‚
   â”œâ”€â”€Request Coach Roleâ”€â”€â”€â”€â–º  â”‚                            â”‚
   â”‚  (with credentials)       â”‚                            â”‚
   â”‚                           â”‚                            â”‚
   â”‚                           â”œâ”€â”€Flag as Pendingâ”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚
   â”‚                           â”‚  in Review Queue            â”‚
   â”‚                           â”‚                            â”‚
   â”‚                      â”Œâ”€â”€â”€â”€â”˜                            â”‚
   â”‚                      â”‚                                 â”‚
   â”‚                      â”‚  â—„â”€â”€Admin Reviewsâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                      â”‚     - Certifications           â”‚
   â”‚                      â”‚     - Background                â”‚
   â”‚                      â”‚     - Qualifications           â”‚
   â”‚                      â”‚                                 â”‚
   â”‚                      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚                      â”‚  â”‚ Approve or Reject?       â”‚   â”‚
   â”‚                      â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜   â”‚
   â”‚                      â”‚       â”‚ Approve          â”‚ Rejectâ”‚
   â”‚                      â”‚       â”‚                  â”‚       â”‚
   â”‚                  â”Œâ”€â”€â”€â”´â”€â”€â”€â”   â”‚            â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”  â”‚
   â”‚                  â”‚       â”‚   â”‚            â”‚         â”‚  â”‚
   â”‚â—„â”€Notificationâ”€â”€Update Roleâ”€Update DB     â”‚    Notify Denial
   â”‚  Approved    to COACH       â”‚            â”‚         â”‚
   â”‚                  â”‚          â”‚            â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”
   â”‚              Grant Access  â”‚            â”‚    â”‚Can     â”‚
   â”‚              to Coach Tools â”‚            â”‚    â”‚Reapply â”‚
   â”‚                  â”‚          â”‚            â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚â—„â”€Dashboardâ”€â”€â”€â”€Show Coachâ”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚  Available     Dashboard    â”‚            â”‚
   â”‚              & Tools        â”‚            â”‚
   â”‚                  â”‚          â”‚            â”‚
   â”‚             Can post        â”‚            â”‚
   â”‚             availability    â”‚            â”‚
   â”‚             & rates         â”‚            â”‚
   â”‚                             â”‚            â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

---

## ğŸŒ Multi-Role User Example

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     EXAMPLE: USER WITH MULTIPLE ROLES - JOHN SMITH              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

      JOHN SMITH (john@example.com)
             â”‚
             â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚         â”‚         â”‚         â”‚
   â–¼         â–¼         â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚COACH â”‚ â”‚CUSTOMERâ”‚COURT â”‚ â”‚ (Could be)
â”‚      â”‚ â”‚       â”‚ OWNERâ”‚ â”‚  ADMIN
â””â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚         â”‚      â”‚
   â”‚         â”‚      â”‚
   â–¼         â–¼      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        DASHBOARD SWITCHER              â”‚
â”‚                                        â”‚
â”‚ Role: [Dropdown showing 3 active roles]â”‚
â”‚ â–¡ Coach          [Selected]            â”‚
â”‚ â–¡ Customer                             â”‚
â”‚ â–¡ Court Owner                          â”‚
â”‚                                        â”‚
â”‚ [ Switch Role ]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                    â”‚
   â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Coach View   â”‚   â”‚Customer View â”‚
â”‚ - Calendar  â”‚   â”‚ - My bookingsâ”‚
â”‚ - Earnings  â”‚   â”‚ - My ratings â”‚
â”‚ - Students  â”‚   â”‚ - Search     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


PERMISSIONS AT ANY GIVEN TIME:

Coach Role Active:
âœ“ Manage coaching schedule
âœ“ View lessons booked
âœ“ Upload availability
âœ“ Set prices
âœ“ View earnings

+ Can still access Customer features:
âœ“ Book other coaches
âœ“ Browse courts
âœ“ View profile

+ Can switch to Court Owner to:
âœ“ Manage court details
âœ“ View court bookings
```

---

## ğŸ“ˆ System Architecture - RBAC Integration

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         PICKLEPLAY - RBAC SYSTEM ARCHITECTURE                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CLIENT (Web/Mobile)
       â”‚
       â”œâ”€â”€â”€ Authentication Service
       â”‚    â”œâ”€ Login/Register
       â”‚    â”œâ”€ Token Generation
       â”‚    â””â”€ Session Management
       â”‚
       â””â”€â”€â”€ API Gateway
            â”‚
            â”œâ”€ Auth Middleware (verify token)
            â”‚
            â”œâ”€ Permission Middleware
            â”‚  â”œâ”€ Extract User Role
            â”‚  â”œâ”€ Check Endpoint Permission
            â”‚  â””â”€ Validate Resource Access
            â”‚
            â”œâ”€ Route Controllers
            â”‚  â”œâ”€ User Controller (SUPER_ADMIN)
            â”‚  â”œâ”€ Court Controller (ADMIN, COURT_OWNER)
            â”‚  â”œâ”€ Coach Controller (COACH, ADMIN, SUPER_ADMIN)
            â”‚  â”œâ”€ Booking Controller (All authenticated users)
            â”‚  â””â”€ Review Controller (ADMIN, CUSTOMER)
            â”‚
            â””â”€ Database Layer
               â”œâ”€ Users Table (with role field)
               â”œâ”€ Role Permissions Table
               â”œâ”€ User Audit Log
               â””â”€ Role Audit Log


FRONTEND LAYER:
â”œâ”€ Login Page
â”œâ”€ Route Guards (check user role)
â”œâ”€ Component Rendering (conditional by role)
â””â”€ API Calls with Auth Token

DATABASE SCHEMA:
Users
â”œâ”€ id
â”œâ”€ name
â”œâ”€ email
â”œâ”€ role (SUPER_ADMIN|ADMIN|COACH|CUSTOMER|COURT_OWNER)
â”œâ”€ role_assignment_date
â””â”€ verified_at

Roles
â”œâ”€ id
â”œâ”€ name
â”œâ”€ description
â””â”€ permissions

Permissions
â”œâ”€ id
â”œâ”€ name
â”œâ”€ description
â””â”€ resource
```

---

## ğŸ’¾ Data Models & Database Schema

### Entity Relationship Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PICKLEPLAY RBAC DATA MODEL - ERD                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     Users        â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚ id (PK)          â”‚
                    â”‚ name             â”‚
                    â”‚ email (UNIQUE)   â”‚
                    â”‚ password_hash    â”‚
                    â”‚ phone            â”‚
                    â”‚ date_of_birth    â”‚
                    â”‚ location         â”‚
                    â”‚ profile_photo    â”‚
                    â”‚ bio              â”‚
                    â”‚ created_at       â”‚
                    â”‚ updated_at       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                 â”‚
                    â”‚1                â”‚M
                â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚   User_Roles     â”‚  â”‚  Role_Applications     â”‚
                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                â”‚ id (PK)          â”‚  â”‚ id (PK)                â”‚
                â”‚ user_id (FK)     â”‚  â”‚ user_id (FK)           â”‚
                â”‚ role_id (FK)     â”‚  â”‚ role_id (FK)           â”‚
                â”‚ assigned_at      â”‚  â”‚ status                 â”‚
                â”‚ assigned_by (FK) â”‚  â”‚ application_data       â”‚
                â”‚ is_active        â”‚  â”‚ submitted_at           â”‚
                â”‚ expires_at       â”‚  â”‚ reviewed_at            â”‚
                â”‚                  â”‚  â”‚ reviewed_by (FK)       â”‚
                â”‚                  â”‚  â”‚ rejection_reason       â”‚
                â”‚                  â”‚  â”‚ can_reapply_at         â”‚
                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚                           â”‚
                     â”‚M                          â”‚M
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚      Roles         â”‚
                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                     â”‚ id (PK)            â”‚
                     â”‚ name (UNIQUE)      â”‚
                     â”‚ description        â”‚
                     â”‚ permissions_json   â”‚
                     â”‚ created_at         â”‚
                     â”‚ updated_at         â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚M
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ Role_Permissions  â”‚
                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                     â”‚ id (PK)            â”‚
                     â”‚ role_id (FK)       â”‚
                     â”‚ permission_id (FK) â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–²
                              â”‚M
                              â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚   Permissions     â”‚
                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                     â”‚ id (PK)            â”‚
                     â”‚ name               â”‚
                     â”‚ description        â”‚
                     â”‚ resource_type      â”‚
                     â”‚ action             â”‚
                     â”‚ created_at         â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ğŸ“Š Detailed Table Structures

#### **1. Users Table**

```sql
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(255) NOT NULL,
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    phone VARCHAR(20),
    date_of_birth DATE,
    location VARCHAR(255),
    profile_photo_url VARCHAR(500),
    bio TEXT,
    email_verified_at TIMESTAMP,
    status ENUM('active', 'inactive', 'suspended') DEFAULT 'active',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    last_login_at TIMESTAMP,
    INDEX idx_email (email),
    INDEX idx_status (status)
);
```

#### **2. Roles Table**

```sql
CREATE TABLE roles (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(100) UNIQUE NOT NULL,
    description TEXT,
    type ENUM('system', 'custom') DEFAULT 'system',
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    UNIQUE INDEX idx_role_name (name)
);

-- Predefined Roles
INSERT INTO roles (name, description, type) VALUES
('CUSTOMER', 'Regular platform user with basic access', 'system'),
('PLAYER', 'Competitive player with ranking system access', 'system'),
('COACH', 'Professional coaching provider', 'system'),
('COURT_OWNER', 'Pickleball court facility manager', 'system'),
('ADMIN', 'Platform administrator with moderation rights', 'system'),
('SUPER_ADMIN', 'System super administrator with full access', 'system');
```

#### **3. User_Roles Table (Many-to-Many)**

```sql
CREATE TABLE user_roles (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL,
    role_id UUID NOT NULL,
    assigned_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    assigned_by UUID REFERENCES users(id),
    is_active BOOLEAN DEFAULT TRUE,
    expires_at TIMESTAMP NULL,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    FOREIGN KEY (role_id) REFERENCES roles(id) ON DELETE RESTRICT,
    FOREIGN KEY (assigned_by) REFERENCES users(id),
    UNIQUE INDEX idx_user_role (user_id, role_id),
    INDEX idx_user_id (user_id),
    INDEX idx_role_id (role_id),
    INDEX idx_is_active (is_active)
);
```

#### **4. Role_Applications Table**

```sql
CREATE TABLE role_applications (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL,
    role_id UUID NOT NULL,
    status ENUM('pending', 'approved', 'rejected', 'withdrawn') DEFAULT 'pending',
    
    -- Application Data (JSON format for flexibility)
    application_data JSON NOT NULL,
    
    -- Timestamps
    submitted_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    reviewed_at TIMESTAMP NULL,
    reviewed_by UUID REFERENCES users(id),
    
    -- Rejection/Feedback
    rejection_reason TEXT NULL,
    can_reapply_at TIMESTAMP NULL,
    admin_notes TEXT NULL,
    
    -- Tracking
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    FOREIGN KEY (role_id) REFERENCES roles(id) ON DELETE RESTRICT,
    INDEX idx_user_id (user_id),
    INDEX idx_status (status),
    INDEX idx_submitted_at (submitted_at),
    INDEX idx_user_status (user_id, status)
);
```

#### **5. Permissions Table**

```sql
CREATE TABLE permissions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(255) UNIQUE NOT NULL,
    description TEXT,
    resource_type VARCHAR(100) NOT NULL,
    action VARCHAR(50) NOT NULL,
    module ENUM('users', 'courts', 'coaches', 'bookings', 'reviews', 'admin', 'system'),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_resource_action (resource_type, action),
    INDEX idx_module (module)
);

-- Sample Permissions
INSERT INTO permissions (name, description, resource_type, action, module) VALUES
('view_courts', 'View court listings', 'courts', 'read', 'courts'),
('create_court', 'Create new court', 'courts', 'create', 'courts'),
('edit_court', 'Edit court information', 'courts', 'update', 'courts'),
('delete_court', 'Delete court', 'courts', 'delete', 'courts'),
('view_coaches', 'View coach directory', 'coaches', 'read', 'coaches'),
('manage_profile', 'Manage own profile', 'users', 'update', 'users'),
('manage_users', 'Manage all users', 'users', 'manage', 'admin'),
('moderate_content', 'Moderate user content', 'reviews', 'moderate', 'admin'),
('view_analytics', 'View platform analytics', 'system', 'read', 'admin');
```

#### **6. Role_Permissions Table (Many-to-Many)**

```sql
CREATE TABLE role_permissions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    role_id UUID NOT NULL,
    permission_id UUID NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    FOREIGN KEY (role_id) REFERENCES roles(id) ON DELETE CASCADE,
    FOREIGN KEY (permission_id) REFERENCES permissions(id) ON DELETE CASCADE,
    UNIQUE INDEX idx_role_permission (role_id, permission_id),
    INDEX idx_permission_id (permission_id)
);
```

#### **7. Player_Profile Table**

```sql
CREATE TABLE player_profiles (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL UNIQUE,
    skill_level ENUM('beginner', 'intermediate', 'advanced', 'professional'),
    years_playing INT,
    play_frequency ENUM('casual', 'regular_1_2x_week', 'frequent_3_4x_week', 'competitive'),
    primary_position ENUM('none_mix', 'dinking_net', 'aggressive_baseline', 'both'),
    tournament_participation ENUM('never', 'local', 'regional', 'national'),
    total_tournament_wins INT DEFAULT 0,
    current_ranking INT NULL,
    rating_score DECIMAL(5, 2),
    preferred_court_type ENUM('indoor', 'outdoor', 'either'),
    preferred_match_format ENUM('singles', 'doubles', 'both'),
    availability_weekdays BOOLEAN DEFAULT TRUE,
    availability_weekends BOOLEAN DEFAULT TRUE,
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    INDEX idx_skill_level (skill_level),
    INDEX idx_ranking (current_ranking)
);
```

#### **8. Coach_Profile Table**

```sql
CREATE TABLE coach_profiles (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL UNIQUE,
    
    -- Professional Info
    professional_title VARCHAR(255),
    years_of_experience INT,
    current_skill_level ENUM('beginner', 'intermediate', 'advanced', 'professional'),
    
    -- Certifications
    certifications JSON,
    licenses JSON,
    verification_status ENUM('pending', 'verified', 'rejected', 'expired'),
    verified_at TIMESTAMP NULL,
    verified_by UUID REFERENCES users(id),
    
    -- Coaching Details
    specializations JSON,
    availability_schedule JSON,
    preferred_court_types JSON,
    
    -- Pricing
    hourly_rate DECIMAL(8, 2),
    package_deals JSON,
    trial_lesson_rate DECIMAL(8, 2),
    
    -- Statistics
    total_lessons INT DEFAULT 0,
    total_students INT DEFAULT 0,
    average_rating DECIMAL(3, 2),
    total_earnings DECIMAL(12, 2) DEFAULT 0,
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    FOREIGN KEY (verified_by) REFERENCES users(id),
    INDEX idx_verification_status (verification_status),
    INDEX idx_hourly_rate (hourly_rate)
);
```

#### **9. Court_Owner_Profile Table**

```sql
CREATE TABLE court_owner_profiles (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL UNIQUE,
    
    -- Business Info
    business_name VARCHAR(255) NOT NULL,
    business_type ENUM('owner', 'manager', 'operator'),
    years_in_business INT,
    business_license_url VARCHAR(500),
    
    -- Verification
    verification_status ENUM('pending', 'verified', 'rejected', 'suspended'),
    verified_at TIMESTAMP NULL,
    verified_by UUID REFERENCES users(id),
    
    -- Facility Details (can have multiple courts)
    total_courts INT,
    facility_type ENUM('indoor', 'outdoor', 'hybrid'),
    
    -- Contact Info
    facility_phone VARCHAR(20),
    facility_email VARCHAR(255),
    website_url VARCHAR(500),
    
    -- Operating Hours
    operating_hours JSON,
    
    -- Amenities
    amenities JSON,
    
    -- Pricing
    court_rate_per_hour DECIMAL(8, 2),
    peak_rate DECIMAL(8, 2),
    
    -- Statistics
    total_bookings INT DEFAULT 0,
    total_revenue DECIMAL(12, 2) DEFAULT 0,
    average_rating DECIMAL(3, 2),
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    FOREIGN KEY (verified_by) REFERENCES users(id),
    INDEX idx_verification_status (verification_status),
    INDEX idx_business_name (business_name)
);
```

#### **10. Audit_Logs Table**

```sql
CREATE TABLE audit_logs (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    
    -- Actor
    actor_id UUID NOT NULL REFERENCES users(id),
    actor_role VARCHAR(50),
    
    -- Action
    action VARCHAR(100) NOT NULL,
    resource_type VARCHAR(100),
    resource_id UUID,
    
    -- Details
    changes JSON,
    reason TEXT,
    ip_address VARCHAR(45),
    user_agent TEXT,
    
    -- Timestamps
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_actor_id (actor_id),
    INDEX idx_created_at (created_at),
    INDEX idx_resource (resource_type, resource_id),
    INDEX idx_action (action)
);
```

---

### ğŸ“ Sample Data Relationships

```
USER: Alice (alice@example.com)
â”œâ”€â”€ Roles (User_Roles):
â”‚   â”œâ”€â”€ CUSTOMER (active)
â”‚   â”œâ”€â”€ PLAYER (active)
â”‚   â””â”€â”€ COACH (active)
â”‚
â”œâ”€â”€ Player_Profile:
â”‚   â”œâ”€â”€ Skill Level: Advanced
â”‚   â”œâ”€â”€ Years Playing: 5
â”‚   â”œâ”€â”€ Current Ranking: #87
â”‚   â””â”€â”€ Total Wins: 12
â”‚
â”œâ”€â”€ Coach_Profile:
â”‚   â”œâ”€â”€ Years Experience: 3
â”‚   â”œâ”€â”€ Verification Status: Verified
â”‚   â”œâ”€â”€ Hourly Rate: $60
â”‚   â”œâ”€â”€ Total Lessons: 142
â”‚   â””â”€â”€ Average Rating: 4.8
â”‚
â””â”€â”€ Role_Applications:
    â””â”€â”€ COURT_OWNER Application (Pending - submitted 2026-01-20)
```

---

### ğŸ”‘ Key Relationships

```
Users (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (M) User_Roles â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (1) Roles
                                                          â”‚
                                                          â”‚ (M)
                                                          â”‚
                                                    Role_Permissions â”€â”€â”€â”€ Permissions

Users (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (M) Role_Applications â”€â”€â”€â”€ (1) Roles

Users (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (1) Player_Profiles
Users (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (1) Coach_Profiles
Users (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (1) Court_Owner_Profiles

Users (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (M) Audit_Logs
```

---

## ğŸ“‹ JSON Data Models

### User Fields & Requirements

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER ACCOUNT & PROFILE FIELDS                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ACCOUNT INFORMATION (Required at Registration):

1. BASIC CREDENTIALS
   â”œâ”€ Email Address
   â”‚  (must be unique, valid RFC 5322 format)
   â”œâ”€ Password
   â”‚  (minimum 8 characters, 1 uppercase, 1 number, 1 special char)
   â”œâ”€ Confirm Password
   â”‚  (must match password field)
   â””â”€ Account Type (Implicit)
      (Always defaults to CUSTOMER role)

2. PERSONAL INFORMATION
   â”œâ”€ Full Name
   â”‚  (first and last name required)
   â”œâ”€ Date of Birth
   â”‚  (must be 18+ years old)
   â”œâ”€ Phone Number
   â”‚  (E.164 format, optional)
   â””â”€ Location
      (city/state or free-text location)


PROFILE INFORMATION (Completed After Registration):

3. PROFILE DETAILS
   â”œâ”€ Profile Photo
   â”‚  (JPG, PNG, WebP, max 5MB, optional)
   â”œâ”€ Bio/About Me
   â”‚  (text area, 0-500 characters, optional)
   â”œâ”€ Gender
   â”‚  (Male, Female, Non-binary, Prefer not to say, optional)
   â”œâ”€ Social Links
   â”‚  â”œâ”€ Instagram
   â”‚  â”œâ”€ LinkedIn
   â”‚  â”œâ”€ Twitter/X
   â”‚  â””â”€ Custom Website
   â”‚     (all optional, must be valid URLs)
   â””â”€ Cover Photo
      (JPG, PNG, WebP, max 10MB, optional)

4. ADDRESS & LOCATION
   â”œâ”€ Street Address
   â”‚  (optional, for coaching/court owner verification)
   â”œâ”€ City
   â”‚  (required for location-based features)
   â”œâ”€ State/Province
   â”‚  (required)
   â”œâ”€ Country
   â”‚  (required)
   â”œâ”€ Postal/ZIP Code
   â”‚  (required)
   â””â”€ GPS Coordinates
      (auto-filled or manual entry, optional)

5. PREFERENCES & SETTINGS
   â”œâ”€ Preferred Language
   â”‚  (English, Spanish, French, etc.)
   â”œâ”€ Timezone
   â”‚  (for scheduling and time display)
   â”œâ”€ Privacy Level
   â”‚  (Public, Private, Friends Only)
   â”œâ”€ Email Notifications
   â”‚  â”œâ”€ Booking Confirmations
   â”‚  â”œâ”€ Lesson Reminders
   â”‚  â”œâ”€ Marketing Emails
   â”‚  â””â”€ Frequency (Immediate, Daily, Weekly)
   â”œâ”€ Push Notifications
   â”‚  (enabled/disabled)
   â””â”€ SMS Notifications
      (enabled/disabled, requires phone verification)

6. VERIFICATION & STATUS
   â”œâ”€ Email Verified
   â”‚  (boolean, verified_at timestamp)
   â”œâ”€ Phone Verified
   â”‚  (boolean, verified_at timestamp, optional)
   â”œâ”€ Account Status
   â”‚  (Active, Inactive, Suspended)
   â””â”€ Email Verification Token
      (for verification link, expires in 24 hours)


SYSTEM TRACKING FIELDS (Auto-Generated):

7. TIMESTAMPS & ACTIVITY
   â”œâ”€ Created At
   â”‚  (account creation timestamp)
   â”œâ”€ Updated At
   â”‚  (last profile update timestamp)
   â”œâ”€ Last Login At
   â”‚  (most recent login timestamp)
   â”œâ”€ Last Password Change
   â”‚  (timestamp of password update)
   â”œâ”€ Login Count
   â”‚  (total number of logins)
   â””â”€ Last IP Address
      (for security audit trail)

8. ROLE & PERMISSION TRACKING
   â”œâ”€ Primary Role
   â”‚  (currently active role)
   â”œâ”€ All Assigned Roles
   â”‚  (array of role IDs with assignment dates)
   â”œâ”€ Pending Role Applications
   â”‚  (array of applications under review)
   â””â”€ Merged Permissions
      (all permissions from all assigned roles)

9. STATISTICAL DATA
   â”œâ”€ Total Bookings Made
   â”‚  (count of completed/pending bookings)
   â”œâ”€ Total Lessons Taken
   â”‚  (count as student/player)
   â”œâ”€ Total Lessons Given
   â”‚  (count as coach, if applicable)
   â”œâ”€ Average Rating Received
   â”‚  (out of 5 stars)
   â”œâ”€ Total Review Count
   â”‚  (number of reviews/ratings)
   â”œâ”€ Tournament Participations
   â”‚  (count, if PLAYER role)
   â”œâ”€ Tournament Wins
   â”‚  (count, if PLAYER role)
   â””â”€ Current Ranking
      (player ranking number, if PLAYER role)

10. PAYMENT & FINANCIAL
    â”œâ”€ Stripe Customer ID
    â”‚  (for payment processing)
    â”œâ”€ Payment Methods
    â”‚  (array of saved cards/payment info)
    â”œâ”€ Total Spent
    â”‚  (sum of all bookings/lessons)
    â”œâ”€ Total Earnings
    â”‚  (sum of lesson payments, if COACH role)
    â”œâ”€ Wallet Balance
    â”‚  (for refunds/credits)
    â””â”€ Billing Address
       (may differ from residential address)

11. SECURITY
    â”œâ”€ Password Hash
    â”‚  (bcrypt hashed, never stored plain text)
    â”œâ”€ Two-Factor Authentication
    â”‚  (enabled/disabled)
    â”œâ”€ 2FA Method
    â”‚  (SMS, Email, Authenticator App)
    â”œâ”€ Backup Codes
    â”‚  (for 2FA recovery, encrypted)
    â””â”€ Security Questions
       (optional, for account recovery)

12. OPTIONAL PROFESSIONAL INFO
    â”œâ”€ Title/Occupation
    â”‚  (optional, for professional profiles)
    â”œâ”€ Company/Organization
    â”‚  (optional)
    â”œâ”€ Years in Sport
    â”‚  (optional, for coaches/advanced players)
    â””â”€ Certifications/Credentials
       (array of docs, if applicable to role)
```

---

## ğŸ“‹ User Data Relationships

```
USER PROFILE CONSISTS OF:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Core User Record                                        â”‚
â”‚ â”œâ”€ Unique ID (UUID)                                    â”‚
â”‚ â”œâ”€ Email & Password                                    â”‚
â”‚ â”œâ”€ Profile Info (name, photo, bio)                    â”‚
â”‚ â”œâ”€ Contact Details (phone, address)                   â”‚
â”‚ â””â”€ Timestamps (created, updated, last_login)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
        â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚            â”‚          â”‚          â”‚
        â–¼            â–¼          â–¼          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Roles  â”‚  â”‚Perms   â”‚ â”‚Stats   â”‚ â”‚Payment   â”‚
    â”‚        â”‚  â”‚        â”‚ â”‚        â”‚ â”‚Info      â”‚
    â”‚(M)     â”‚  â”‚(M)     â”‚ â”‚(1)     â”‚ â”‚(1)       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USER SEARCH FILTERS:
â”œâ”€ By Email
â”œâ”€ By Name
â”œâ”€ By Location
â”œâ”€ By Role
â”œâ”€ By Rating
â”œâ”€ By Join Date
â””â”€ By Activity Status
```

### Role Object with Permissions

```json
{
  "id": "role-coach-uuid",
  "name": "COACH",
  "description": "Professional coaching provider with lesson management capabilities",
  "type": "system",
  "is_active": true,
  "created_at": "2025-01-01T00:00:00Z",
  "updated_at": "2026-01-15T10:00:00Z",
  
  "permissions": [
    {
      "id": "perm-001",
      "name": "manage_profile",
      "description": "Manage own profile and coach information",
      "resource_type": "coach_profile",
      "action": "update",
      "module": "users"
    },
    {
      "id": "perm-002",
      "name": "create_lesson",
      "description": "Create and schedule lessons",
      "resource_type": "lessons",
      "action": "create",
      "module": "coaches"
    },
    {
      "id": "perm-003",
      "name": "manage_availability",
      "description": "Manage coaching availability schedule",
      "resource_type": "availability",
      "action": "update",
      "module": "coaches"
    },
    {
      "id": "perm-004",
      "name": "view_bookings",
      "description": "View own lesson bookings",
      "resource_type": "bookings",
      "action": "read",
      "module": "coaches"
    },
    {
      "id": "perm-005",
      "name": "receive_payments",
      "description": "Receive payments for lessons",
      "resource_type": "payments",
      "action": "read",
      "module": "coaches"
    },
    {
      "id": "perm-006",
      "name": "view_courts",
      "description": "View court listings",
      "resource_type": "courts",
      "action": "read",
      "module": "courts"
    },
    {
      "id": "perm-007",
      "name": "book_court",
      "description": "Book courts for coaching sessions",
      "resource_type": "courts",
      "action": "create",
      "module": "courts"
    }
  ]
}
```

### Role Application Object

```json
{
  "id": "app-uuid-12345",
  "user_id": "550e8400-e29b-41d4-a716-446655440000",
  "role_id": "role-coach-uuid",
  "status": "pending",
  
  "application_data": {
    "professional_info": {
      "professional_title": "Certified Pickleball Coach",
      "years_of_experience": 5,
      "current_skill_level": "advanced",
      "specializations": ["technique", "strategy", "fitness"]
    },
    "credentials": {
      "certifications": [
        {
          "name": "IPTPA Coaching Certification",
          "issue_date": "2021-06-15",
          "expiry_date": "2026-06-15",
          "document_url": "https://cdn.pickleplay.com/docs/iptpa-cert.pdf"
        }
      ],
      "licenses": [
        {
          "name": "Professional License",
          "number": "PL-2021-45892",
          "document_url": "https://cdn.pickleplay.com/docs/license.pdf"
        }
      ]
    },
    "background": {
      "play_history": "Started playing pickleball in 2019, competed in regional tournaments",
      "tournament_experience": "10+ local tournaments, 5 regional tournaments",
      "previous_coaching": "Coached at SportsPlex community center for 3 years"
    },
    "coaching_details": {
      "availability_schedule": {
        "monday": ["09:00-12:00", "14:00-18:00"],
        "tuesday": ["09:00-12:00", "14:00-18:00"],
        "wednesday": ["off"],
        "thursday": ["09:00-12:00", "14:00-18:00"],
        "friday": ["09:00-12:00", "14:00-18:00"],
        "saturday": ["10:00-16:00"],
        "sunday": ["10:00-14:00"]
      },
      "preferred_court_types": ["indoor", "outdoor"],
      "lesson_durations": ["30min", "60min", "90min"]
    },
    "pricing": {
      "hourly_rate": 75,
      "package_deals": [
        {
          "name": "5 Lesson Package",
          "lessons": 5,
          "regular_price": 375,
          "package_price": 325,
          "discount_percent": 13
        },
        {
          "name": "10 Lesson Package",
          "lessons": 10,
          "regular_price": 750,
          "package_price": 600,
          "discount_percent": 20
        }
      ],
      "trial_lesson_rate": 25
    },
    "profile": {
      "professional_photo_url": "https://cdn.pickleplay.com/photos/alice-coach.jpg",
      "bio": "Certified coach with 5+ years experience. Specializing in technique and strategic gameplay.",
      "social_links": {
        "linkedin": "https://linkedin.com/in/alicejohnson",
        "instagram": "https://instagram.com/alicecoaches"
      }
    }
  },
  
  "submitted_at": "2026-01-20T10:30:00Z",
  "reviewed_at": null,
  "reviewed_by": null,
  "rejection_reason": null,
  "can_reapply_at": null,
  "admin_notes": null,
  "created_at": "2026-01-20T10:30:00Z",
  "updated_at": "2026-01-20T10:30:00Z"
}
```

### Player Profile Object

```json
{
  "id": "player-profile-uuid",
  "user_id": "550e8400-e29b-41d4-a716-446655440000",
  "skill_level": "advanced",
  "years_playing": 5,
  "play_frequency": "frequent_3_4x_week",
  "primary_position": "aggressive_baseline",
  "tournament_participation": "regional",
  "total_tournament_wins": 12,
  "current_ranking": 87,
  "rating_score": 4.8,
  "preferred_court_type": "outdoor",
  "preferred_match_format": "doubles",
  "availability_weekdays": true,
  "availability_weekends": true,
  "created_at": "2025-12-20T14:22:00Z",
  "updated_at": "2026-01-15T09:45:00Z"
}
```

### Coach Profile Object

```json
{
  "id": "coach-profile-uuid",
  "user_id": "550e8400-e29b-41d4-a716-446655440000",
  "professional_title": "Certified Pickleball Coach",
  "years_of_experience": 5,
  "current_skill_level": "advanced",
  "specializations": ["technique", "strategy", "fitness", "conditioning"],
  "certifications": [
    {
      "name": "IPTPA Coaching Certification",
      "issue_date": "2021-06-15",
      "expiry_date": "2026-06-15",
      "document_url": "https://cdn.pickleplay.com/docs/iptpa-cert.pdf"
    }
  ],
  "licenses": [
    {
      "name": "Professional License",
      "number": "PL-2021-45892",
      "document_url": "https://cdn.pickleplay.com/docs/license.pdf"
    }
  ],
  "verification_status": "verified",
  "verified_at": "2026-01-12T16:00:00Z",
  "verified_by": "admin-user-id",
  "hourly_rate": 75,
  "package_deals": [
    {
      "name": "5 Lesson Package",
      "lessons": 5,
      "regular_price": 375,
      "package_price": 325
    }
  ],
  "trial_lesson_rate": 25,
  "total_lessons": 42,
  "total_students": 8,
  "average_rating": 4.8,
  "total_earnings": 3150,
  "created_at": "2026-01-10T11:15:00Z",
  "updated_at": "2026-01-22T14:30:00Z"
}
```

### Court Owner Profile Object

```json
{
  "id": "court-owner-profile-uuid",
  "user_id": "user-uuid-court-owner",
  "business_name": "SunSet Pickleball Courts",
  "business_type": "owner",
  "years_in_business": 4,
  "business_license_url": "https://cdn.pickleplay.com/docs/business-license.pdf",
  "verification_status": "verified",
  "verified_at": "2026-01-08T10:00:00Z",
  "verified_by": "admin-user-id",
  "total_courts": 6,
  "facility_type": "outdoor",
  "facility_phone": "+1-555-987-6543",
  "facility_email": "info@sunsetcourts.com",
  "website_url": "https://sunsetcourts.com",
  "operating_hours": {
    "monday": "07:00-21:00",
    "tuesday": "07:00-21:00",
    "wednesday": "07:00-21:00",
    "thursday": "07:00-21:00",
    "friday": "07:00-22:00",
    "saturday": "06:00-22:00",
    "sunday": "06:00-20:00"
  },
  "amenities": [
    "parking",
    "ac_climate_control",
    "coaching_available",
    "restaurant_cafe",
    "lounge_area",
    "equipment_rental"
  ],
  "court_rate_per_hour": 45,
  "peak_rate": 60,
  "membership_options": [
    {
      "tier": "basic",
      "name": "Basic Monthly",
      "price": 199,
      "benefits": ["4 court hours per month", "10% off additional hours"]
    },
    {
      "tier": "premium",
      "name": "Premium Monthly",
      "price": 399,
      "benefits": ["12 court hours per month", "20% off additional hours", "Priority booking"]
    }
  ],
  "total_bookings": 342,
  "total_revenue": 18450,
  "average_rating": 4.6,
  "created_at": "2025-08-01T09:00:00Z",
  "updated_at": "2026-01-25T11:30:00Z"
}
```

### Authentication Response

```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "Bearer",
  "expires_in": 3600,
  "user": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "name": "Alice Johnson",
    "email": "alice@pickleplay.com",
    "roles": ["CUSTOMER", "PLAYER", "COACH"],
    "current_active_role": "COACH",
    "permissions": [
      "view_courts",
      "create_booking",
      "create_lesson",
      "manage_availability",
      "view_earnings"
    ]
  }
}
```

### Permissions Check Response

```json
{
  "has_permission": true,
  "user_id": "550e8400-e29b-41d4-a716-446655440000",
  "current_role": "COACH",
  "required_permission": "create_lesson",
  "required_action": "create",
  "required_resource": "lessons",
  "granted": true,
  "reason": "User has COACH role which includes create_lesson permission"
}
```

### API Error Response

```json
{
  "error": true,
  "code": "PERMISSION_DENIED",
  "message": "You do not have permission to access this resource",
  "status_code": 403,
  "details": {
    "required_role": "ADMIN",
    "user_role": "COACH",
    "required_permission": "moderate_content",
    "timestamp": "2026-01-26T12:00:00Z"
  }
}
```

